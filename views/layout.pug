doctype html
html(lang="fr")
  head
    meta(charset="UTF-8")
    meta(name="viewport", content="width=device-width, initial-scale=1.0")
    title= title || "Application d'Authentification"
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css", rel="stylesheet")
    link(href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css", rel="stylesheet")
    style.
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      .card {
        border: none;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      }
      .btn-primary {
        background: linear-gradient(45deg, #667eea, #764ba2);
        border: none;
        border-radius: 25px;
        padding: 10px 30px;
        font-weight: 500;
      }
      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      }
      .form-control {
        border-radius: 10px;
        border: 2px solid #e9ecef;
        padding: 12px 15px;
      }
      .form-control:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
      }
      .navbar-brand {
        font-weight: 700;
        color: white !important;
      }
      .alert {
        border-radius: 10px;
        border: none;
      }
  body
    nav.navbar.navbar-expand-lg.navbar-dark.bg-transparent
      .container
        a.navbar-brand(href="/")
          i.fas.fa-shield-alt.me-2
          | AuthApp
        .navbar-nav.ms-auto
          if user
            .nav-item.dropdown
              a.nav-link.dropdown-toggle(href="#", role="button", data-bs-toggle="dropdown")
                i.fas.fa-user.me-1
                | #{user.firstName} #{user.lastName}
              ul.dropdown-menu
                li
                  a.dropdown-item(href="/dashboard")
                    i.fas.fa-tachometer-alt.me-2
                    | Dashboard
                if user.role === 'admin'
                  li
                    a.dropdown-item(href="/admin")
                      i.fas.fa-cog.me-2
                      | Administration
                li
                  hr.dropdown-divider
                li
                  a.dropdown-item(href="/logout")
                    i.fas.fa-sign-out-alt.me-2
                    | Déconnexion
          else
            a.nav-link(href="/login")
              i.fas.fa-sign-in-alt.me-1
              | Connexion
            a.nav-link(href="/register")
              i.fas.fa-user-plus.me-1
              | Inscription

    .container.py-5
      .row.justify-content-center
        .col-md-8.col-lg-6
          // Messages de succès
          if messages && messages.success && messages.success.length > 0
            each message in messages.success
              .alert.alert-success.alert-dismissible.fade.show(role="alert")
                i.fas.fa-check-circle.me-2
                | #{message}
                button.btn-close(type="button", data-bs-dismiss="alert")
          
          // Messages d'erreur
          if messages && messages.error && messages.error.length > 0
            each message in messages.error
              .alert.alert-danger.alert-dismissible.fade.show(role="alert")
                i.fas.fa-exclamation-triangle.me-2
                | #{message}
                button.btn-close(type="button", data-bs-dismiss="alert")
          
          // Messages d'information
          if messages && messages.info && messages.info.length > 0
            each message in messages.info
              .alert.alert-info.alert-dismissible.fade.show(role="alert")
                i.fas.fa-info-circle.me-2
                | #{message}
                button.btn-close(type="button", data-bs-dismiss="alert")
          
          // Erreurs de validation
          if error
            .alert.alert-danger.alert-dismissible.fade.show(role="alert")
              i.fas.fa-exclamation-triangle.me-2
              | #{error}
              button.btn-close(type="button", data-bs-dismiss="alert")
          
          if errors && errors.length > 0
            each error in errors
              .alert.alert-danger.alert-dismissible.fade.show(role="alert")
                i.fas.fa-exclamation-triangle.me-2
                | #{error.msg}
                button.btn-close(type="button", data-bs-dismiss="alert")

          block content

    script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js")
